(this["webpackJsonpsafe-courier-front"]=this["webpackJsonpsafe-courier-front"]||[]).push([[0],{27:function(e,t,c){},28:function(e,t,c){},36:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),r=c(21),a=c.n(r),o=(c(27),c(28),c(4)),i=c(6),j=c.n(i),l=c(10),u=c(5),b=c(0),d=Object(n.createContext)(),h=function(e){var t=Object(n.useState)({isAuth:!1,UID:"",email:"",username:"",role:""}),c=Object(u.a)(t,2),s=c[0],r=c[1],a=Object(n.useState)(!1),o=Object(u.a)(a,2),i=o[0],h=o[1],p=Object(n.useState)(""),O=Object(u.a)(p,2),x=O[0],m=O[1],f=function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://nmscapi.herokuapp.com/api/v1/auth/profile",{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.isAuth&&(r(e),h(e.isAuth))})).catch((function(e){console.log({Error:e.message})}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){f()}),[]),Object(b.jsx)(d.Provider,{value:{user:s,setUser:r,isAuth:i,setIsAuth:h,parcel:x,setParcel:m},children:e.children})},p=c(2);function O(){var e=Object(n.useContext)(d),t=e.isAuth,c=e.setIsAuth,s=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://nmscapi.herokuapp.com/api/v1/auth/logout",{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){c(!1)})).catch((function(e){return console.log(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?Object(b.jsxs)("div",{className:"header",children:[Object(b.jsx)(p.b,{to:"/order",children:"SafECoURiEr"}),Object(b.jsx)(p.b,{to:"/profile",children:"Account"}),Object(b.jsx)(p.b,{to:"/",onClick:s,children:"Logout"})]}):Object(b.jsx)("div",{className:"header",children:Object(b.jsx)(p.b,{to:"/",children:"SafECoURiEr"})})}var x=c.p+"static/media/delivery.d25bb214.png",m=c(11),f=c(9);function v(e){var t=Object(n.useState)({weight:"",destination:"",location:""}),c=Object(u.a)(t,2),s=c[0],r=c[1],a=Object(n.useContext)(d),o=(a.parcel,a.setParcel),i=Object(n.useState)(""),j=Object(u.a)(i,2),l=j[0],h=j[1],O=function(e){var t=e.target,c=t.name,n=t.value;r(Object(f.a)(Object(f.a)({},s),{},Object(m.a)({},c,n)))};return Object(b.jsxs)("div",{className:"boxed",children:[Object(b.jsx)("h1",{children:"Make an order!"}),l?Object(b.jsx)("p",{children:l}):Object(b.jsx)("span",{}),Object(b.jsxs)("form",{onSubmit:function(e){var t={weight:s.weight,location:s.location,destination:s.destination},c={method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)};fetch("https://nmscapi.herokuapp.com/api/v1/parcels",c).then((function(e){return e.json()})).then((function(e){e.success&&console.log(e),o(e),h(e.message)})).catch((function(e){return console.log({Error:e.message})}))},autoComplete:"off",children:[Object(b.jsx)("input",{type:"number",name:"weight",value:s.weight,placeholder:"Weight in Kgs",onChange:O}),Object(b.jsx)("input",{type:"text",name:"location",value:s.location,placeholder:"Location",onChange:O}),Object(b.jsx)("input",{type:"text",name:"destination",value:s.destination,placeholder:"Destination",onChange:O}),Object(b.jsx)("button",{type:"submit",children:"Order Now"}),Object(b.jsx)(p.b,{to:"/track",children:"Track Parcel"})]})]})}function g(){return""!==Object(n.useContext)(d).user.username?Object(b.jsx)(v,{}):Object(b.jsxs)("div",{className:"land",children:[Object(b.jsx)("img",{src:x,alt:"by Hany Alashkar from Pixabay",className:"limg"}),Object(b.jsx)("h2",{children:"Get your parcel safely and fast"}),Object(b.jsx)("p",{children:"With Safe Courier, you can make delivery orders and keep track of your parcel wherever you are!"}),Object(b.jsxs)("div",{className:"landb",children:[Object(b.jsx)(p.b,{to:"register",children:Object(b.jsx)("button",{children:"SIGNUP"})}),Object(b.jsx)(p.b,{to:"login",children:Object(b.jsx)("button",{children:"LOGIN"})})]})]})}function w(){var e=Object(n.useContext)(d),t=e.isAuth,c=e.setIsAuth,s=Object(n.useState)(""),r=Object(u.a)(s,2),a=r[0],o=r[1],i=Object(n.useState)({email:"",password:""}),j=Object(u.a)(i,2),l=j[0],h=j[1],O=function(e){var t=e.target,c=t.name,n=t.value;h(Object(f.a)(Object(f.a)({},l),{},Object(m.a)({},c,n)))};return t?Object(b.jsx)(v,{}):Object(b.jsxs)("div",{className:"boxed",children:[Object(b.jsx)("h1",{children:"Login Here!"}),Object(b.jsxs)("form",{onSubmit:function(e){var t={email:l.email,password:l.password},n={method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)};fetch("https://nmscapi.herokuapp.com/api/v1/auth/login",n).then((function(e){return e.json()})).then((function(e){e.isAuth||o(e.message),c(!0)})).catch((function(e){console.log({Error:e.message})})),e.preventDefault()},autoComplete:"off",children:[a?Object(b.jsx)("p",{children:a}):Object(b.jsx)("span",{}),Object(b.jsx)("input",{type:"email",name:"email",value:l.email,placeholder:"Enter Email",onChange:O}),Object(b.jsx)("input",{type:"password",name:"password",value:l.password,placeholder:"Enter Password",onChange:O}),Object(b.jsx)("button",{type:"submit",children:"LOGIN"}),Object(b.jsx)(p.b,{to:"/register",children:"Not a member?"})]})]})}function y(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(""),a=Object(u.a)(r,2),o=a[0],i=a[1],d=Object(n.useState)(!1),h=Object(u.a)(d,2),O=h[0],x=h[1],v=Object(n.useState)({email:"",username:"",password:"",password2:""}),g=Object(u.a)(v,2),y=g[0],C=g[1],N=function(e){var t=e.target,c=t.name,n=t.value;C(Object(f.a)(Object(f.a)({},y),{},Object(m.a)({},c,n)))},k=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c?Object(b.jsx)(w,{}):Object(b.jsxs)("div",{className:"boxed",children:[Object(b.jsx)("h1",{children:"Register Here!"}),o?Object(b.jsx)("p",{children:o}):Object(b.jsx)("p",{}),Object(b.jsxs)("form",{onSubmit:function(e){var t={email:y.email,username:y.username,password:y.password,current_password:y.password2};t=O?Object(f.a)(Object(f.a)({},t),{},{role:"admin"}):Object(f.a)({},t);var c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};fetch("https://nmscapi.herokuapp.com/api/v1/auth/signup",c).then((function(e){return e.json()})).then((function(e){e.success&&s(e.success),i(e.message)})).catch((function(e){console.log({Error:e})})),e.preventDefault()},autoComplete:"off",children:[Object(b.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:y.email,onChange:N}),Object(b.jsx)("input",{type:"text",name:"username",value:y.username,onChange:N,placeholder:"Username"}),Object(b.jsx)("input",{type:"password",name:"password",placeholder:"Enter Password",value:y.password,onChange:N}),Object(b.jsx)("input",{type:"password",name:"password2",placeholder:"Enter Password Again",value:y.password2,onChange:N}),Object(b.jsx)("button",{type:"submit",children:"SUBMIT"}),Object(b.jsx)(p.b,{to:"/login",children:"Already a member? Login Here!"}),Object(b.jsx)("button",{type:"submit",onClick:k,children:"ADMIN SIGNUP"})]})]})}function C(){var e=Object(n.useContext)(d),t=e.user;return!1===e.isAuth?Object(b.jsx)("div",{className:"boxed",children:Object(b.jsx)("p",{children:"Loading..."})}):Object(b.jsxs)("div",{className:"boxed boxtile",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Personal Info"}),Object(b.jsxs)("div",{className:"boxtile",children:[Object(b.jsxs)("p",{children:["Username: ",t.username]}),Object(b.jsxs)("p",{children:["Email: ",t.email]})]})]}),Object(b.jsx)(p.b,{to:"/orders",children:"View Orders"})]})}function N(){var e=Object(o.f)(),t=Object(n.useContext)(d).user,c=t.UID,s=t.role,r=Object(n.useState)(!0),a=Object(u.a)(r,2),i=a[0],h=a[1],p=Object(n.useState)([]),O=Object(u.a)(p,2),x=O[0],m=O[1],f=Object(n.useContext)(d),v=(f.parcel,f.setParcel),g=function(t){var c=t.currentTarget.id;v({oid:c}),e.push("/details")},w=function(){var e=Object(l.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="https://nmscapi.herokuapp.com/api/v1/users/".concat(c,"/parcels"),"https://nmscapi.herokuapp.com/api/v1/parcels",t="admin"===s?"https://nmscapi.herokuapp.com/api/v1/parcels":n,!c){e.next=8;break}return e.next=6,fetch(t,{headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){m(e)})).catch((function(e){return console.log(e.message)})).finally((function(){h(!1)}));case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return w(),h(!0)}),[]),i?Object(b.jsx)("div",{className:"",children:Object(b.jsx)("p",{children:"Loading..."})}):Object(b.jsx)("div",{children:x.map((function(e){return Object(b.jsxs)("div",{className:"boxo",id:e._id,onClick:g,children:[Object(b.jsx)("div",{className:"boxor",children:Object(b.jsx)("span",{children:e.orderDate.substr(0,10)})}),Object(b.jsxs)("div",{className:"boxod",children:[Object(b.jsx)("span",{children:"Shipped:"}),Object(b.jsx)("span",{children:e.shipDate})]}),Object(b.jsxs)("div",{className:"boxod",children:[Object(b.jsx)("span",{children:"TrackID:"}),Object(b.jsx)("span",{children:e.trackingNo})]}),Object(b.jsxs)("div",{className:"boxod",children:[Object(b.jsx)("span",{children:"Weight: "}),Object(b.jsxs)("span",{children:[e.weight," Kg"]})]}),Object(b.jsxs)("div",{className:"boxod",children:[Object(b.jsx)("span",{children:"Price: "}),Object(b.jsxs)("span",{children:[e.cost," UGX"]})]})]},e._id)}))})}function k(){return Object(b.jsxs)("div",{className:"boxed",children:[Object(b.jsx)("h1",{children:"Orders"}),Object(b.jsx)(N,{}),Object(b.jsxs)("div",{className:"boxodo",children:[Object(b.jsx)(p.b,{to:"/order",children:"Make an Order!"}),Object(b.jsx)(p.b,{to:"/track",children:"Track a Parcel!"})]})]})}function S(e){var t=e.text,c=e.dbc;return Object(b.jsxs)("div",{className:"boxtile",children:[Object(b.jsx)("p",{className:"hightext",children:t}),Object(b.jsx)("span",{className:"lowtext",children:c})]})}function E(){var e=Object(n.useContext)(d).parcel.oid,t=Object(n.useState)(""),c=Object(u.a)(t,2),s=c[0],r=c[1],a=function(){var t=Object(l.a)(j.a.mark((function t(){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,fetch("/parcels/".concat(e),{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){r(e)})).catch((function(e){return console.log(e.message)}));case 3:return c=t.sent,t.abrupt("return",c);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){a()})),Object(b.jsxs)("div",{children:[Object(b.jsx)(S,{text:"Track No.",dbc:s.trackingNo}),Object(b.jsx)(S,{text:"Status",dbc:s.status}),Object(b.jsx)(S,{text:"Weight",dbc:s.weight}),Object(b.jsx)(S,{text:"Cost",dbc:s.cost}),Object(b.jsx)(S,{text:"From",dbc:s.location}),Object(b.jsx)(S,{text:"To",dbc:s.destination})]})}function A(e){var t=Object(n.useContext)(d).parcel.oid,c=e.text,s="/parcels/".concat(t).concat(e.url),r=Object(n.useState)(""),a=Object(u.a)(r,2),o=a[0],i=a[1],h={method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include"},p=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(s,h).then((function(e){return e.json()})).then((function(e){i(e.message)})).catch((function(e){return console.log({Error:e.message})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{children:[o?Object(b.jsx)("p",{children:o}):Object(b.jsx)("p",{}),Object(b.jsx)("button",{onClick:p,url:s,children:c})]})}function P(){var e=Object(n.useContext)(d).user.role;return e?Object(b.jsxs)("div",{className:"boxed box",children:[Object(b.jsx)("h1",{children:"Order Details"}),Object(b.jsx)(E,{}),"user"===e?Object(b.jsxs)("div",{children:[Object(b.jsx)(A,{text:"Change Destination",url:"/destination"}),Object(b.jsx)(A,{text:"Cancel Order",url:"/cancel"}),Object(b.jsx)(p.b,{to:"/track",children:"Track Parcel"})]}):Object(b.jsxs)("div",{children:[Object(b.jsx)(A,{text:"Change Status",url:"/status"}),Object(b.jsx)(A,{text:"Change Location",url:"/presentLocation"})]})]}):Object(b.jsx)("div",{className:"boxed box",children:Object(b.jsx)("p",{children:"Loading..."})})}function T(){return Object(b.jsx)("div",{className:"boxed",children:Object(b.jsx)("h1",{children:"Track Parcel"})})}function I(){var e=(new Date).getFullYear();return Object(b.jsxs)("footer",{children:[Object(b.jsxs)("div",{className:"foot",children:[Object(b.jsx)("p",{children:"For News and Articles"}),Object(b.jsxs)("form",{children:[Object(b.jsx)("input",{type:"text",placeholder:"Enter Email"}),Object(b.jsx)("button",{className:"footb",children:"Subscribe"})]})]}),Object(b.jsxs)("div",{className:"footinfo",children:[Object(b.jsx)("p",{children:"About Us"}),Object(b.jsx)("p",{children:"Contact Us"}),Object(b.jsx)("p",{children:"API Docs"}),Object(b.jsx)("p",{children:"Github Repo"})]}),Object(b.jsx)("div",{children:Object(b.jsxs)("p",{children:["Copyright Safe Courier ",e]})})]})}var U=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsxs)(h,{children:[Object(b.jsx)(O,{}),Object(b.jsxs)(o.c,{children:[Object(b.jsx)(o.a,{path:"/",exact:!0,component:g}),Object(b.jsx)(o.a,{path:"/register",exact:!0,component:y}),Object(b.jsx)(o.a,{path:"/login",exact:!0,component:w}),Object(b.jsx)(o.a,{path:"/profile",component:C}),Object(b.jsx)(o.a,{path:"/order",component:v}),Object(b.jsx)(o.a,{path:"/orders",component:k}),Object(b.jsx)(o.a,{path:"/details",component:P}),Object(b.jsx)(o.a,{path:"/track",component:T})]})]}),Object(b.jsx)(I,{})]})};a.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(p.a,{children:Object(b.jsx)(U,{})})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.34f42506.chunk.js.map